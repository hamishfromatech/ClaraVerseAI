# ============================================================================
# ClaraVerse Environment Configuration
# ============================================================================
# This is the SINGLE SOURCE OF TRUTH for Docker Compose deployments.
# Docker Compose automatically reads this file.
#
# Setup Instructions:
#   1. Copy this file: cp .env.example .env
#   2. Fill in required values (marked with TODO)
#   3. Run: ./dev-docker.sh up
#
# For production:
#   1. Copy this file to your server
#   2. Update values for production
#   3. Run: docker-compose -f docker-compose.yml -f docker-compose.production.yml up -d --build
# ============================================================================

# ================================
# ENVIRONMENT MODE
# ================================
# Options: development, production
ENVIRONMENT=development

# ================================
# FRONTEND URLs (for building)
# ================================
# Development: http://localhost:3103 / ws://localhost:3103
# Production:  https://api.yourdomain.com / wss://api.yourdomain.com
VITE_API_BASE_URL=http://localhost:3103
VITE_WS_URL=ws://localhost:3103

# ================================
# SUPABASE AUTHENTICATION
# ================================
# TODO: Get these from https://app.supabase.com/project/_/settings/api
# Required for user authentication (optional for development)
VITE_SUPABASE_URL=
VITE_SUPABASE_ANON_KEY=

# Backend (same values as above)
SUPABASE_URL=
SUPABASE_KEY=

# ================================
# BACKEND CONFIGURATION
# ================================
# CORS: Comma-separated allowed origins
# Development: http://localhost,http://localhost:5273,http://localhost:5274
# Production:  https://yourdomain.com
ALLOWED_ORIGINS=http://localhost,http://localhost:182,http://localhost:5273,http://localhost:5274,http://localhost:3100,http://localhost:8180

# Encryption key for user data (MongoDB conversations, credentials)
# TODO: Generate with: openssl rand -hex 32
# WARNING: Losing this key = losing access to encrypted data!
ENCRYPTION_MASTER_KEY=

# Frontend URL (for payment redirects)
FRONTEND_URL=http://localhost:182

# Backend public URL (for generating download URLs)
BACKEND_URL=http://localhost:3103

# Cloudflare Turnstile (optional - for bot protection)
VITE_TURNSTILE_SITE_KEY=

# ================================
# MYSQL DATABASE
# ================================
# MySQL root password (default: claraverse_root_2024)
MYSQL_ROOT_PASSWORD=claraverse_root_2024

# MySQL user password (default: claraverse_pass_2024)
MYSQL_PASSWORD=claraverse_pass_2024

# ================================
# MONGODB & REDIS
# ================================
# MongoDB - for conversations, workflows, and data persistence
# Docker:     mongodb://mongodb:27117/claraverse
# Atlas:      mongodb+srv://user:pass@cluster.mongodb.net/claraverse
# Self-host:  mongodb://user:pass@host:27117/claraverse
MONGODB_URI=mongodb://mongodb:27117/claraverse

# Redis - for job scheduling and WebSocket pub/sub
REDIS_URL=redis://redis:6479

# ================================
# EXTERNAL SERVICES
# ================================
# E2B Code Interpreter (optional - for code execution)
# Get API key from: https://e2b.dev/dashboard
E2B_API_KEY=

# SearXNG (internal Docker URL, or comma-separated for load balancing)
SEARXNG_URLS=http://searxng:8180

# Composio (optional - for integrations)
COMPOSIO_API_KEY=
COMPOSIO_GOOGLESHEETS_AUTH_CONFIG_ID=
COMPOSIO_GMAIL_AUTH_CONFIG_ID=



# ================================
# ADMIN (Optional)
# ================================
# Comma-separated list of Supabase user IDs with superadmin access
# Example: user-id-1,user-id-2,user-id-3
SUPERADMIN_USER_IDS=

# ================================
# RATE LIMITING (requests per minute)
# ================================
# Global API rate limit (all /api/* routes)
RATE_LIMIT_GLOBAL_API=200

# Public read-only endpoints
RATE_LIMIT_PUBLIC_READ=120

# Authenticated user requests
RATE_LIMIT_AUTHENTICATED=60

# WebSocket connections
RATE_LIMIT_WEBSOCKET=20

# Image proxy (to prevent bandwidth abuse)
RATE_LIMIT_IMAGE_PROXY=60
